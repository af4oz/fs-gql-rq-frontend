import{u as g,e as v,b as a,j as s,s as f,d as w}from"./index.5f521739.js";import{b,d as S,r as c,L as N}from"./vendor.a7dbbac3.js";function C(){const t=b();g(void 0,{onSuccess:e=>{e.whoami&&t("/")}});const n=S(),[i,m]=c.exports.useState(""),[o,d]=c.exports.useState(""),{mutate:p,error:r,isLoading:h}=v({onSuccess:async e=>{var l,u;e.login&&(f((l=e.login)==null?void 0:l.jwt),w((u=e.login)==null?void 0:u.refreshToken),n.invalidateQueries(["WhoAmI"]),t("/"))}});return a("div",{className:"flex flex-col items-center ",children:[s("h2",{children:"Login"}),a("form",{onSubmit:e=>{e.preventDefault(),n.clear(),p({email:i,password:o})},className:"my-8",children:[r&&s("div",{className:"error",children:r.message||"Something went wrong!"}),s("div",{children:s("input",{type:"email",name:"email",placeholder:"email",onChange:e=>m(e.target.value),value:i,autoComplete:"username",required:!0,className:"base-input"})}),s("div",{className:"mt-8",children:s("input",{type:"password",name:"password",placeholder:"password",autoComplete:"current-password",onChange:e=>d(e.target.value),value:o,required:!0,className:"base-input"})}),s("button",{type:"submit",className:"teal-btn mt-8",children:h?"logging in...":"Login"})]}),a("div",{children:["Don't have account, ",s(N,{to:"/sign-up",children:"Sign up"})]})]})}export{C as default};
